// DEFINITIONS  

type depositParameters = [ticket<bytes>,tx_rollup_l2_address]; 

type rollupStorage = map<tx_rollup_l2_address,ticket<bytes>>;

type rollupReturn_ =  [list<operation>, rollupStorage];

// MAIN  TODO %deposit

let rollupMain = (x :[depositParameters , rollupStorage]): rollupReturn_ => {
  let [[ticket,addrp] , store] = x ;
  let [[addr, [v, amt]], tic] : read_ticket_return = Tezos.read_ticket(ticket);
  return [ list([]) as list<operation> , Map.update(addrp, Some(tic), store)];
};

/* BUGGY
let rollupMain = ([depositParameters , store]:[depositParameters , rollupStorage]): rollupReturn_ => {
  let [[addr, [v, amt]], tic] : read_ticket_return = Tezos.read_ticket(depositParameters[0]);
  return [ list([]) as list<operation> , Map.update(depositParameters[1], Some(tic), store)];
};
*/
